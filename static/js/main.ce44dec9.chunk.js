(this["webpackJsonpatcoder-marathon-rating-history-frontend"]=this["webpackJsonpatcoder-marathon-rating-history-frontend"]||[]).push([[0],{118:function(t,i,e){"use strict";e.r(i);var n,a=e(2),r=e.n(a),s=e(30),o=e.n(s),h=(e(78),e(79),e(31)),c=e(17),l=e(131),d=e(34),u=e(121),x=e(122),f=e(5),v=function(){return Object(f.jsx)(u.a,{color:"light",light:!0,expand:"md",fixed:"top",children:Object(f.jsx)(x.a,{tag:h.b,to:"/",children:"AtCoder Marathon Rating History"})})},j=(e(85),e(130)),g=e(20),b=e(123),m=e(124),p=e(125),y=e(126),O=e(127),w=e(128),R=function(t){var i=t.paramUser,e=Object(a.useState)(i),n=Object(g.a)(e,2),r=n[0],s=n[1],o=Object(a.useMemo)((function(){return function(t){return"/rating/".concat(t)}(r)}),[r]),l=Object(c.g)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(m.a,{sm:12,children:Object(f.jsxs)(p.a,{style:{width:"100%"},children:[Object(f.jsx)(y.a,{for:"input-user",children:"ATCODER ID:"}),Object(f.jsx)(O.a,{value:r,type:"text",name:"input-user",id:"input-user",placeholder:r||"eivour",onChange:function(t){return s(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&l.push(o)}})]})})}),Object(f.jsx)(b.a,{children:Object(f.jsx)(m.a,{sm:12,children:Object(f.jsx)(w.a,{color:"primary",tag:h.c,to:o,block:!0,style:{display:"block",marginTop:"0.5rem"},children:"Go"})})})]})},C=function(t){var i=["th","st","nd","rd"],e=t%100;return"".concat(t).concat(i[(e-20)%10]||i[e]||i[0])},T=function(t){var i=String(t.getFullYear()),e="0".concat(t.getMonth()+1).slice(-2),n="0".concat(t.getDate()).slice(-2);return"".concat(i,"/").concat(e,"/").concat(n)},k=function(t,i,e){return(t-i)/(e-i)},S=e(22),N=e(23),_=function(){function t(i){Object(S.a)(this,t),this.data=void 0,this.length=void 0,this.length=i,this.data=Array(++i).fill(0)}return Object(N.a)(t,[{key:"sum",value:function(t){var i=0;for(++t;t>0;t-=t&-t)i+=this.data[t];return i}},{key:"add",value:function(t,i){for(++t;t<this.data.length;t+=t&-t)this.data[t]+=i}},{key:"query",value:function(t,i){return this.sum(i-1)-this.sum(t-1)}}]),t}(),M=[[0,"#808080",.15,8421504],[400,"#804000",.15,8404992],[800,"#008000",.15,32768],[1200,"#00C0C0",.2,49344],[1600,"#0000FF",.1,255],[2e3,"#C0C000",.25,12632064],[2400,"#FF8000",.2,16744448],[2800,"#FF0000",.1,16711680]],F=function(t){for(var i=M.length-1;i>=0;i--)if(t>=M[i][0])return M[i];return[-1,"#000000",.1,0]},E=function(){function t(i){var e=this;Object(S.a)(this,t),this.bit=void 0,this.user2rating=void 0,this.user2ratingRankHistory=void 0,this.ratings=void 0,this.bit=new _(1e4),this.user2rating=new Map,this.user2ratingRankHistory=new Map,void 0!==i?(i.forEach((function(t){if(void 0!==t){for(var i in t)e.user2rating.has(i)?(e.user2rating.set(i,Math.max(e.user2rating.get(i),t[i].NewRating)),e.bit.add(t[i].OldRating,-1),e.bit.add(t[i].NewRating,1)):(e.user2rating.set(i,t[i].NewRating),e.bit.add(t[i].NewRating,1));e.user2rating.forEach((function(t,i){var n,a=e.bit.query(t+1,1e4)+1;e.user2ratingRankHistory.has(i)?null===(n=e.user2ratingRankHistory.get(i))||void 0===n||n.push([t,a]):e.user2ratingRankHistory.set(i,[[t,a]])}))}})),this.ratings=Array.from(this.user2rating.values()),this.ratings.sort((function(t,i){return i-t}))):this.ratings=[]}return Object(N.a)(t,[{key:"getRank",value:function(t){var i=this.user2ratingRankHistory.get(t);return void 0===i?-1:i[i.length-1][1]}},{key:"getRating",value:function(t){var i;return null!==(i=this.user2rating.get(t))&&void 0!==i?i:0}},{key:"getHistogram",value:function(){for(var t=[0,1,2,3,4,5,7,9,12,15,19,25,32,42,54,69,89,114,147,188,242,311,400],i=500;i<1e4;i+=100)t.push(i);var e=Array(t.length);for(e.fill(0),this.ratings.forEach((function(i){var n=t.findIndex((function(e,n){return e<=i&&i<t[n+1]}));-1!==n&&e[n]++}));0===e[e.length-1];)e.pop(),t.pop();return[t,e]}}]),t}(),H=function(t){var i=t.paramUser,e=t.ratingHistory,n=t.ratingRanks;if(0===e.length)return Object(f.jsx)(f.Fragment,{});var a=e[e.length-1],r=new Date(1e3*a.EndTime),s=n.getRank(i),o=F(a.NewRating)[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{style:{fontSize:"24px"},children:"Contest Status"}),Object(f.jsx)("hr",{}),Object(f.jsxs)("table",{className:"dl-table",style:{fontSize:"14px"},children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"no-break",children:"Name"}),Object(f.jsx)("td",{children:i})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"no-break",children:"Rank"}),Object(f.jsx)("td",{children:C(s)})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"no-break",children:"Rating"}),Object(f.jsx)("td",{children:Object(f.jsx)("span",{style:{color:o},children:a.NewRating})})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"no-break",children:"Rated Matches"}),Object(f.jsx)("td",{children:e.length})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"no-break",children:"Last Competed"}),Object(f.jsx)("td",{children:T(r)})]})]})]})},G=e(27),A=e.n(G),D=e(35),U=void 0,P=function(){var t=Object(D.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0===U?fetch("".concat(".","/json/contests/contests.json")).catch((function(t){throw Error(t)})).then(function(){var t=Object(D.a)(A.a.mark((function t(i){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.json();case 2:return U=t.sent,t.abrupt("return",U);case 4:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}()):Promise.resolve(U));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=new Map,B=function(){var t=Object(D.a)(A.a.mark((function t(i){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0!==i&&i.length>0&&i.startsWith("ahc")?X.has(i)?Promise.resolve(X.get(i)):fetch("".concat(".","/json/results/").concat(i,".json")).catch((function(t){throw Error(t)})).then(function(){var t=Object(D.a)(A.a.mark((function t(e){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return n=t.sent,X.set(i,n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}()):Promise.resolve(void 0));case 1:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}(),L=e(129),z=e(132),Y=e(133),I=e(134),W=e(38),J=e(13),q=function(t){var i=new J.c;return t.addChild(i),i},K=function(t,i,e,n,a){var r=new J.e("",new J.f({fontFamily:n,fontSize:a,fill:0}));return r.x=i,r.y=e,r.anchor.x=.5,r.anchor.y=.5,t.addChild(r),r},Q="Lato",V="Squada One",Z=50,$=580,tt=70,it=function(){function t(i,e,n){Object(S.a)(this,t),this.object=void 0,this.angle=void 0,this.speed=void 0,this.velocityX=void 0,this.velocityY=void 0,this.rotateSpeed=void 0,this.life=void 0,this.initialX=void 0,this.initialY=void 0,this.initialX=e,this.initialY=n,this.object=K(i,0,0,Q,64),this.angle=0,this.speed=0,this.velocityX=0,this.velocityY=0,this.rotateSpeed=0,this.life=0,this.object.x=this.initialX,this.object.y=this.initialY}return Object(N.a)(t,[{key:"set",value:function(t,i,e){this.object.x=this.initialX,this.object.y=this.initialY,this.angle=Math.random()*Math.PI*2,this.speed=4*Math.random()+4,this.velocityX=Math.cos(this.angle)*this.speed,this.velocityY=Math.sin(this.angle)*this.speed,this.rotateSpeed=20*Math.random()+10,this.life=30,this.object.visible=!0,this.object.style.fill=t,this.object.text=e?"\u2605":"@",this.object.alpha=i}},{key:"disable",value:function(){this.life=0,this.object.visible=!1}},{key:"update",value:function(){this.life<=0?this.object.visible=!1:(this.object.x+=this.velocityX,this.velocityX*=.9,this.object.y+=this.velocityY,this.velocityY*=.9,this.life--,this.object.scale.x=this.object.scale.y=this.life/30,this.object.rotation+=this.rotateSpeed)}}]),t}(),et=function(){function t(i,e,n){Object(S.a)(this,t),this.particles=void 0,this.particles=[];for(var a=0;a<20;++a)this.particles.push(new it(i,e,n))}return Object(N.a)(t,[{key:"set",value:function(t,i,e,n){var a=n>=3200;this.particles.forEach((function(n,r){r<t?n.set(i,e,a):n.disable()}))}},{key:"update",value:function(){this.particles.forEach((function(t){t.life>0&&t.update()}))}}]),t}(),nt=function(){function t(i){var e=this;Object(S.a)(this,t),this.app=void 0,this.statusContainer=void 0,this.borderGraphics=void 0,this.ratingText=void 0,this.placeText=void 0,this.diffText=void 0,this.dateText=void 0,this.contestNameText=void 0,this.particles=void 0,this.standingsUrl=void 0,this.app=i,this.statusContainer=void 0,this.standingsUrl="",this.app.ticker.maxFPS=60,this.app.ticker.add((function(){e.animate()}))}return Object(N.a)(t,[{key:"destroy",value:function(){this.statusContainer&&(this.statusContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.statusContainer=void 0)}},{key:"init",value:function(){var t=this;this.destroy(),this.statusContainer=new J.b,this.app.stage.addChild(this.statusContainer),this.borderGraphics=q(this.statusContainer),this.ratingText=K(this.statusContainer,125,40,V,48),this.placeText=K(this.statusContainer,210,30.925925925925924,Q,16),this.diffText=K(this.statusContainer,210,51.666666666666664,Q,11),this.diffText.style.fill=8947848,this.dateText=K(this.statusContainer,250,22.5,Q,14),this.contestNameText=K(this.statusContainer,250,48.75,Q,20),this.dateText.anchor.x=0,this.contestNameText.anchor.x=0,this.contestNameText.width>370&&(this.contestNameText.scale.x=370/this.contestNameText.width),this.contestNameText.interactive=!0,this.contestNameText.cursor="pointer",this.contestNameText.on("click",(function(){window.location.href=t.standingsUrl})),this.particles=new et(this.statusContainer,this.ratingText.x,this.ratingText.y)}},{key:"set",value:function(t,i){if(this.particles){var e,n=new Date(1e3*t.EndTime),a=t.NewRating,r=t.OldRating,s=t.Place,o=t.ContestName,h=F(a),c=h[3],l=h[2];if(this.borderGraphics.clear().lineStyle(1,c).drawRoundedRect(Z,5,$,tt,2),this.ratingText.text=String(a),this.ratingText.style.fill=c,this.placeText.text=C(s),this.diffText.text="".concat(0===(e=a-r)?"\xb1":e<0?"-":"+").concat(Math.abs(e)),this.dateText.text=n.toLocaleDateString(),this.contestNameText.text=o,this.contestNameText.scale.x=1,this.contestNameText.width>370&&(this.contestNameText.scale.x=370/this.contestNameText.width),i){var d=Math.floor(17*Math.pow(function(t){for(var i=M[M.length-1][0]+400,e=M.length-1;e>=0;e--){if(t>=M[e][0])return(t-M[e][0])/(i-M[e][0]);i=M[e][0]}return 0}(a),2)+3);this.particles.set(d,c,l,a)}this.standingsUrl=t.StandingsUrl}}},{key:"animate",value:function(){this.particles&&this.particles.update()}}]),t}(),at=e(40),rt=40,st=20,ot=588,ht=430,ct="Lato",lt=function(){function t(i){Object(S.a)(this,t),this.app=void 0,this.chartContainer=void 0,this.chartGraphics=void 0,this.labelTextStyle=void 0,this.n=void 0,this.xaxis=void 0,this.data=void 0,this.rating=void 0,this.yMax=void 0,this.lineGraphics=void 0,this.ratingText=void 0,this.app=i,this.chartContainer=void 0}return Object(N.a)(t,[{key:"destroy",value:function(){this.chartContainer&&(this.chartContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.chartContainer=void 0)}},{key:"init",value:function(t,i,e){if(this.destroy(),this.chartContainer=new J.b,this.app.stage.addChild(this.chartContainer),i.length!==t.length)throw new Error("\u9577\u3055\u4e0d\u4e00\u81f4");this.xaxis=t,this.data=i,this.rating=e,this.n=i.length,0!=this.n&&(this.xaxis.push(this.xaxis[this.n-1]+100),this.yMax=1.1*this.data.reduce((function(t,i){return Math.max(t,i)}),0),this.labelTextStyle=new J.f({fontFamily:ct,fontSize:12,fill:0}),this.initBackground(),this.initChart())}},{key:"initBackground",value:function(){var t=this;if(void 0!==this.chartContainer){var i=q(this.chartContainer);i.x=rt,i.y=st,i.alpha=.3;var e=q(this.chartContainer);e.x=rt,e.y=st;var n=function(i,e){var n=new J.e(i,t.labelTextStyle);return n.x=30,n.y=st+e,n.anchor.x=1,n.anchor.y=.5,void 0===t.chartContainer?n:t.chartContainer.addChild(n)},a=function(i,e){var n=new J.e(i,new J.f({fontFamily:ct,fontSize:10,fill:0}));return n.x=rt+e,n.y=453,n.anchor.x=0,n.anchor.y=.5,n.angle=90,void 0===t.chartContainer?n:t.chartContainer.addChild(n)};e.lineStyle(1,14540253);for(var r=20;r<this.yMax;r+=20){var s=ht-ht*k(r,0,this.yMax);e.moveTo(0,s).lineTo(ot,s),n(String(r),s)}for(var o=0;o<this.n;o+=2){var h=ot*k(o,0,this.n);a(String(this.xaxis[o]),h)}e.lineStyle(1.5,8947848).drawRoundedRect(0,0,ot,ht,2)}}},{key:"newText",value:function(t,i,e,n){var a=new J.e("",n);return a.x=i,a.y=e,a.anchor.x=.5,a.anchor.y=.5,t.addChild(a),a}},{key:"initChart",value:function(){var t=this;if(void 0!==this.chartContainer){this.chartGraphics=q(this.chartContainer);var i=new at.a;i.color=0,i.alpha=.3,i.distance=Math.hypot(1,2),i.angle=Math.atan2(1,2),i.blur=3,this.chartGraphics.filters=[i];var e=this.newText(this.chartGraphics,0,0,new J.f({fontFamily:ct,fontSize:10,fill:0}));e.visible=!1;var n=q(this.chartContainer);n.lineStyle(1,14540253).moveTo(0,20).lineTo(0,ht),n.y=st,n.visible=!1;for(var a=function(i){var a=q(t.chartGraphics),r=ht*k(t.data[i],0,t.yMax),s=Math.floor(rt+ot*k(i,0,t.n)),o=Math.floor(rt+ot*k(i+1,0,t.n));a.x=s,a.y=450-r,a.lineStyle(.5,16777215).beginFill(F(t.xaxis[i])[3]).drawRect(0,0,o-s-1,r);var h=new J.d(0,+r-ht,ot/t.n,ht);a.hitArea=h,a.interactive=!0,a.on("mouseover",(function(){!function(i){var a=rt+ot*k(i+.5,0,t.n);e.text="".concat(t.data[i]),e.style.fill=F(t.xaxis[i])[1],e.x=a,e.y=30,n.x=a,e.visible=!0,n.visible=!0}(i)})),a.on("mouseout",(function(){e.visible=!1,n.visible=!1}))},r=0;r<this.n;++r)a(r);this.initUserRatingLine(this.rating)}}},{key:"getXandColor",value:function(t){for(var i=ot,e=0,n=this.n-1;n>=0;n--)if(this.xaxis[n]<=t){var a=k(t+.5,this.xaxis[n],this.xaxis[n+1]);i=ot*k(n+a,0,this.n),e=F(this.xaxis[n])[3];break}return[i,e]}},{key:"initUserRatingLine",value:function(t){if(void 0!==this.chartContainer&&void 0!==this.chartGraphics){var i=this.getXandColor(t),e=Object(g.a)(i,2),n=e[0],a=e[1];this.lineGraphics=q(this.chartContainer),this.lineGraphics.lineStyle(1,0).moveTo(0,0).lineTo(0,ht),this.lineGraphics.x=rt+n,this.lineGraphics.y=st,this.ratingText=this.newText(this.chartGraphics,rt+n,12,new J.f({fontFamily:ct,fontSize:11,fill:a})),this.ratingText.text=String(t)}}},{key:"updateUserRatingLine",value:function(t){this.rating=t,void 0!==this.lineGraphics&&void 0!==this.ratingText&&(this.lineGraphics.x=rt+this.getXandColor(t)[0],this.ratingText.text=String(t))}}]),t}(),dt=function(t){var i=t.xaxis,e=t.data,n=t.rating,r=Object(W.a)([{family:V},{family:Q}]),s=Object(a.useRef)(null),o=Object(a.useState)(),h=Object(g.a)(o,2),c=h[0],l=h[1];return Object(a.useEffect)((function(){var t=s.current;if(null!==t){var i=new J.a({width:640,height:480,view:t,antialias:!0});i.renderer.backgroundColor=16777215;var e=new lt(i);l(e)}}),[]),Object(a.useEffect)((function(){r&&e&&c&&(0!==e.length?c.init(i,e,n):c.destroy())}),[r,e,c]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{children:Object(f.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"480px",height:"100%",width:"100%",display:"block"},ref:s,width:"640",height:"480"})})})},ut=2592e3,xt=50,ft=580,vt=325,jt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gt=function(){function t(i){Object(S.a)(this,t),this.app=void 0,this.chartContainer=void 0,this.x_min=void 0,this.x_max=void 0,this.y_min=void 0,this.y_max=void 0,this.labelTextStyle=void 0,this.R=void 0,this.app=i,this.chartContainer=void 0}return Object(N.a)(t,[{key:"destroy",value:function(){this.chartContainer&&(this.chartContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.chartContainer=void 0)}},{key:"init",value:function(t,i){var e=this;this.destroy(),this.chartContainer=new J.b,this.app.stage.addChild(this.chartContainer),this.R=1,this.x_min=1e11,this.x_max=0,this.y_min=1e4,this.y_max=0,t.forEach((function(t){e.x_min=Math.min(e.x_min,t.EndTime),e.x_max=Math.max(e.x_max,t.EndTime),e.y_min=Math.min(e.y_min,t.NewRating),e.y_max=Math.max(e.y_max,t.NewRating)})),this.x_min-=ut,this.x_max+=ut,this.y_min=Math.min(1500,Math.max(0,this.y_min-100)),this.y_max+=300,this.labelTextStyle=new J.f({fontFamily:"Lato",fontSize:12*this.R,fill:0}),this.initBackground(),this.initChart(t,i)}},{key:"initBackground",value:function(){var t=this;if(void 0!==this.chartContainer){var i=new J.c;i.x=xt*this.R,i.y=5*this.R,i.alpha=.3;var e=new J.c;e.x=xt*this.R,e.y=5*this.R,this.chartContainer.addChild(i),this.chartContainer.addChild(e);for(var n=0,a=M.length-1;a>=0;a--){var r=vt-vt*k(M[a][0],this.y_min,this.y_max);r>0&&n<vt&&(n=Math.max(n,0),i.beginFill(M[a][3]).drawRect(0,n*this.R,ft*this.R,(Math.min(r,vt)-n)*this.R).endFill()),n=r}for(var s=function(i,e){var n=new J.e(i,t.labelTextStyle);return n.x=40*t.R,n.y=(5+e)*t.R,n.anchor.x=1,n.anchor.y=.5,void 0===t.chartContainer?n:t.chartContainer.addChild(n)},o=function(i,e,n){var a=new J.e(i,t.labelTextStyle);return a.x=(xt+e)*t.R,a.y=(332+n)*t.R,a.anchor.x=.5,a.anchor.y=0,void 0===t.chartContainer?a:t.chartContainer.addChild(a)},h=0;h<=this.y_max;h+=400)if(h>=this.y_min){var c=vt-vt*k(h,this.y_min,this.y_max);s(String(h),c),e.lineStyle(1*this.R,16777215),2e3===h&&e.lineStyle(1*this.R,0),e.moveTo(0,c*this.R).lineTo(ft*this.R,c*this.R)}e.lineStyle(1*this.R,16777215);for(var l=6,d=3;d>=1;d--)this.x_max-this.x_min<=31536e3*d+5184e3&&(l=d);for(var u=!0,x=2010;x<3e3;x++){for(var f=!1,v=0;v<12;v+=l){var j="0".concat(v+1).slice(-2),g=Date.parse("".concat(x,"-").concat(j,"-01T00:00:00"))/1e3;if(this.x_min<g&&g<this.x_max){var b=ft*k(g,this.x_min,this.x_max);0===v||u?(o(jt[v],b,0),o(String(x),b,13),u=!1):o(jt[v],b,0),e.moveTo(b*this.R,0).lineTo(b*this.R,vt*this.R)}if(g>this.x_max){f=!0;break}}if(f)break}e.lineStyle(1.5*this.R,8947848).drawRoundedRect(0,0,ft*this.R,vt*this.R,2*this.R)}}},{key:"initChart",value:function(t,i){var e=this;if(void 0!==this.chartContainer){var n=new J.c;this.chartContainer.addChild(n);var a=new at.a;a.color=0,a.alpha=.3,a.distance=Math.hypot(1,2)*this.R,a.angle=Math.atan2(1,2),a.blur=3*this.R,n.filters=[a];var r=q(n),s=q(n);s.interactive=!0;var o=function(e){l[e].scale.x=l[e].scale.y=1.2,i.set(t[e],!0)},h=function(t){l[t].scale.x=l[t].scale.y=1},c=t.reduce((function(t,i,e){var n=t.argmax,a=t.maxRating;return i.NewRating>a&&(n=e,a=i.NewRating),{argmax:n,maxRating:a}}),{argmax:0,maxRating:0}).argmax,l=t.map((function(t,i){var a=q(n);return a.lineStyle(1*e.R,16777215),i===c&&a.lineStyle(1*e.R,0),a.beginFill(F(t.NewRating)[3]).drawCircle(0,0,3.5*e.R),a.x=(xt+ft*k(t.EndTime,e.x_min,e.x_max))*e.R,a.y=(vt-vt*k(t.NewRating,e.y_min,e.y_max)+5)*e.R,a.interactive=!0,a.on("mouseover",(function(){o(i)})),a.on("mouseout",(function(){h(i)})),a})),d=80*this.R;(this.x_min+this.x_max)/2<t[c].EndTime&&(d=-80*this.R);var u=l[c].x+d,x=l[c].y-16;s.lineStyle(1*this.R,16777215).moveTo(l[c].x,l[c].y).lineTo(u,x),s.lineStyle(1*this.R,8947848).beginFill(16777215).drawRoundedRect(u-40*this.R,x-10*this.R,80*this.R,20*this.R,2*this.R);var f=new J.e("Highest: ".concat(t[c].NewRating),this.labelTextStyle);f.x=u,f.y=x,f.anchor.x=.5,f.anchor.y=.5,this.chartContainer.addChild(f),s.on("mouseover",(function(){o(c)})),s.on("mouseout",(function(){h(c)})),[[2,11184810],[1,16777215]].forEach((function(t){var i=Object(g.a)(t,2),n=i[0],a=i[1];r.lineStyle(n*e.R,a),r.moveTo(l[0].x,l[0].y),l.forEach((function(t){r.lineTo(t.x,t.y)}))}))}}}]),t}(),bt=function(t){var i=t.ratingHistory,e=Object(W.a)([{family:V},{family:Q}]),n=Object(a.useRef)(null),r=Object(a.useRef)(null),s=Object(a.useState)(),o=Object(g.a)(s,2),h=o[0],c=o[1];return Object(a.useEffect)((function(){var t=n.current,i=r.current;if(null!==t&&null!==i){var e=new J.a({width:640,height:80,view:t,antialias:!0}),a=new J.a({width:640,height:360,view:i,antialias:!0});e.renderer.backgroundColor=16777215,a.renderer.backgroundColor=16777215;var s=new nt(e),o=new gt(a);c([s,o])}}),[]),Object(a.useEffect)((function(){if(e&&i&&h){var t=Object(g.a)(h,2),n=t[0],a=t[1];if(0===i.length)return a.destroy(),void n.destroy();var r=i[i.length-1];n.init(),a.init(i,n),n.set(r,!1)}}),[e,i,h]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"80px",height:"100%",width:"100%",display:"block"},ref:n,width:"640",height:"80"})}),Object(f.jsx)("div",{children:Object(f.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"360px",height:"100%",width:"100%",display:"block"},ref:r,width:"640",height:"360"})})]})};!function(t){t[t.rating=0]="rating",t[t.ratingDistribution=1]="ratingDistribution"}(n||(n={}));var mt=function(t){return Object(f.jsx)(f.Fragment,{children:t.display?t.children:Object(f.jsx)(f.Fragment,{})})},pt=function(t){var i=t.paramUser,e=t.ratingHistory,r=t.ratingRanks,s=Object(a.useState)(n.rating),o=Object(g.a)(s,2),h=o[0],c=o[1],l=Object(a.useState)(""),d=Object(g.a)(l,2),u=d[0],x=d[1];Object(a.useEffect)((function(){if(e){var t=e[e.length-1],n=t.Place,a="".concat(i," took ").concat(C(n)," place in ").concat(t.ContestName,"!\n")+"AtCoder Marathon Rating History";x(a)}}),[i,e]);var v=r.getHistogram(),j=Object(g.a)(v,2),b=j[0],m=j[1],p=r.getRating(i);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{marginTop:"20px"},children:Object(f.jsxs)(L.a,{size:"sm",className:"btn-group-ac-style",children:[Object(f.jsx)(w.a,{onClick:function(){c(n.rating)},active:h===n.rating,children:"Rating"}),Object(f.jsx)(w.a,{onClick:function(){c(n.ratingDistribution)},active:h===n.ratingDistribution,children:"Rating Distribution"})]})}),Object(f.jsxs)("div",{style:{marginTop:"20px"},children:[Object(f.jsx)(mt,{display:h===n.rating,children:Object(f.jsx)(bt,{paramUser:i,ratingHistory:e})}),Object(f.jsx)(mt,{display:h===n.ratingDistribution,children:Object(f.jsx)(dt,{xaxis:b,data:m,rating:p})})]}),Object(f.jsxs)("div",{style:{textAlign:"center"},children:[Object(f.jsx)(Y.a,{url:window.location.href,title:u,id:"chart-share-button",children:Object(f.jsx)(I.a,{size:40,round:!0})}),Object(f.jsx)(z.a,{placement:"top",target:"chart-share-button",children:(u+" "+window.location.href).replaceAll("\n"," ")})]})]})},yt=function(t){var i,e=null!==(i=t.match.params.user)&&void 0!==i?i:"",n=Object(d.b)("/json/contests/contests",P),a=n.data,r=n.error,s=Object(d.b)(a?"/json/results/":null,(function(){if(!a)return Promise.resolve([void 0]);var t=a.map((function(t){return B(t.slug)}));return Promise.all(t)})),o=s.data,h=s.error,c=e&&o?o.map((function(t){return t&&e in t?t[e]:void 0})).filter((function(t){return void 0!==t})):void 0,l=new E(o);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{children:"Description"}),Object(f.jsx)("p",{children:"AtCoder \u3067\u884c\u308f\u308c\u305f\u30de\u30e9\u30bd\u30f3\u30b3\u30f3\u30c6\u30b9\u30c8\u306e\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u63a8\u79fb\u3092\u30b0\u30e9\u30d5\u306b\u8868\u793a\u3057\u307e\u3059\uff0e"}),Object(f.jsx)("p",{children:"AtCoder \u304c\u516c\u5f0f\u306b\u30de\u30e9\u30bd\u30f3\u30ec\u30fc\u30c8\u306e\u30b0\u30e9\u30d5\u8868\u793a\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u307e\u3067\u306e\u3064\u306a\u304e\u3067\u3059\uff0e"}),Object(f.jsx)("hr",{}),r?Object(f.jsx)(j.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest list."}):void 0===a?Object(f.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest data..."}):h?Object(f.jsx)(j.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest results."}):void 0===o?Object(f.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest results..."}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)(R,{paramUser:e}),Object(f.jsx)("hr",{}),(null===c||void 0===c?void 0:c.length)?Object(f.jsxs)("div",{style:{maxWidth:"640px",marginLeft:"auto",marginRight:"auto"},children:[Object(f.jsx)(H,{paramUser:e,ratingHistory:c,ratingRanks:l}),Object(f.jsx)(pt,{paramUser:e,ratingHistory:c,ratingRanks:l})]}):Object(f.jsx)(j.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"AtCoder ID is empty or invalid."})]})},Ot=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(d.a,{value:{revalidateOnFocus:!1},children:Object(f.jsxs)(h.a,{children:[Object(f.jsx)(v,{}),Object(f.jsx)(l.a,{style:{width:"100%",maxWidth:"90%",marginTop:"80px"},children:Object(f.jsxs)(c.d,{children:[Object(f.jsx)(c.b,{exact:!0,path:"/rating/:user",component:yt}),Object(f.jsx)(c.b,{exact:!0,path:"/rating/",component:yt}),Object(f.jsx)(c.a,{path:"/",to:"/rating/"})]})}),Object(f.jsx)("footer",{className:"footer",style:{marginTop:"30px",padding:"30px",backgroundColor:"#efefef"},children:Object(f.jsxs)("div",{className:"container",children:["\u9023\u7d61\u5148:"," ",Object(f.jsx)("a",{href:"https://twitter.com/iiljj",target:"_blank",rel:"noreferrer noopener",children:"si (@iiljj) / Twitter"}),", ",Object(f.jsx)("a",{href:"https://github.com/iilj",target:"_blank",rel:"noreferrer noopener",children:"iilj (iilj) / GitHub"})]})})]})})})},wt=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,135)).then((function(i){var e=i.getCLS,n=i.getFID,a=i.getFCP,r=i.getLCP,s=i.getTTFB;e(t),n(t),a(t),r(t),s(t)}))};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(Ot,{})}),document.getElementById("root")),wt()},79:function(t,i,e){},85:function(t,i,e){}},[[118,1,2]]]);
//# sourceMappingURL=main.ce44dec9.chunk.js.map
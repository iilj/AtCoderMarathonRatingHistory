(this["webpackJsonpatcoder-marathon-rating-history-frontend"]=this["webpackJsonpatcoder-marathon-rating-history-frontend"]||[]).push([[0],{122:function(t,e,i){},137:function(t,e,i){},209:function(t,e,i){},210:function(t,e,i){},211:function(t,e,i){},212:function(t,e,i){},213:function(t,e,i){"use strict";i.r(e);var n,a=i(1),r=i.n(a),s=i(28),c=i.n(s),o=(i(121),i(122),i(31)),h=i(21),l=i(237),d=i(39),u=i(24),x=i(217),g=i(218),j=i(219),f=i(220),b=i(221),v=i(222),m=i(223),p=i(40),y=i(42),O=i(2),C=function(){var t=Object(a.useState)(!1),e=Object(u.a)(t,2),i=e[0],n=e[1];return Object(O.jsxs)(x.a,{color:"light",light:!0,expand:"md",fixed:"top",children:[Object(O.jsx)(g.a,{tag:o.b,to:"/",children:"AtCoder Marathon Rating History"}),Object(O.jsx)(j.a,{onClick:function(){return n(!i)}}),Object(O.jsx)(f.a,{isOpen:i,navbar:!0,children:Object(O.jsxs)(b.a,{className:"mr-auto",navbar:!0,children:[Object(O.jsx)(v.a,{children:Object(O.jsxs)(m.a,{tag:o.b,to:"/rating/",children:[Object(O.jsx)(p.a,{style:{marginRight:"4px"},icon:y.a}),"Rating"]})}),Object(O.jsx)(v.a,{children:Object(O.jsxs)(m.a,{tag:o.b,to:"/ranking/",children:[Object(O.jsx)(p.a,{style:{marginRight:"4px"},icon:y.c}),"Ranking"]})})]})})]})},R=(i(137),i(232)),w=i(224),k=i(225),T=i(226),F=i(227),S=i(228),N=i(229),M=function(t){var e=t.paramUser,i=Object(a.useState)(e),n=Object(u.a)(i,2),r=n[0],s=n[1],c=Object(a.useMemo)((function(){return function(t){return"/rating/".concat(t)}(r)}),[r]),l=Object(h.g)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w.a,{children:Object(O.jsx)(k.a,{sm:12,children:Object(O.jsxs)(T.a,{style:{width:"100%"},children:[Object(O.jsx)(F.a,{for:"input-user",children:"ATCODER ID:"}),Object(O.jsx)(S.a,{value:r,type:"text",name:"input-user",id:"input-user",placeholder:r||"eivour",onChange:function(t){return s(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&l.push(c)}})]})})}),Object(O.jsx)(w.a,{children:Object(O.jsx)(k.a,{sm:12,children:Object(O.jsx)(N.a,{color:"primary",tag:o.c,to:c,block:!0,style:{display:"block",marginTop:"0.5rem"},children:"Go"})})})]})},_=function(t){var e=["th","st","nd","rd"],i=t%100;return"".concat(t).concat(e[(i-20)%10]||e[i]||e[0])},P=function(t){var e=String(t.getFullYear()),i="0".concat(t.getMonth()+1).slice(-2),n="0".concat(t.getDate()).slice(-2);return"".concat(e,"/").concat(i,"/").concat(n)},B=function(t,e,i){return(t-e)/(i-e)},G=i(16),z=i(17),A=function(){function t(e){Object(G.a)(this,t),this.data=void 0,this.length=void 0,this.length=e,this.data=Array(++e).fill(0)}return Object(z.a)(t,[{key:"sum",value:function(t){var e=0;for(++t;t>0;t-=t&-t)e+=this.data[t];return e}},{key:"add",value:function(t,e){for(++t;t<this.data.length;t+=t&-t)this.data[t]+=e}},{key:"query",value:function(t,e){return this.sum(e-1)-this.sum(t-1)}}]),t}(),E=[[0,"#808080",.15,8421504],[400,"#804000",.15,8404992],[800,"#008000",.15,32768],[1200,"#00C0C0",.2,49344],[1600,"#0000FF",.1,255],[2e3,"#C0C000",.25,12632064],[2400,"#FF8000",.2,16744448],[2800,"#FF0000",.1,16711680]],H=function(t){for(var e=E.length-1;e>=0;e--)if(t>=E[e][0])return E[e];return[-1,"#000000",.1,0]},D=function(){function t(e){var i=this;if(Object(G.a)(this,t),this.bit=void 0,this.user2rating=void 0,this.user2ratingRankHistory=void 0,this.ratings=void 0,this.bit=new A(1e4),this.user2rating=new Map,this.user2ratingRankHistory=new Map,void 0!==e){e.forEach((function(t){if(void 0!==t){for(var e in t){var n=i.user2rating.get(e);if(void 0!==n){var a=n.rating;n.rating=t[e].NewRating,n.match++,1===t[e].Place&&n.win++,i.bit.add(a,-1),i.bit.add(t[e].NewRating,1)}else i.user2rating.set(e,{rank:-1,rating:t[e].NewRating,username:e,win:1===t[e].Place?1:0,match:1}),i.bit.add(t[e].NewRating,1)}i.user2rating.forEach((function(t,e){var n,a=i.bit.query(t.rating+1,1e4)+1;(t.rank=a,i.user2ratingRankHistory.has(e))?null===(n=i.user2ratingRankHistory.get(e))||void 0===n||n.push([t.rating,a]):i.user2ratingRankHistory.set(e,[[t.rating,a]])}))}}));for(var n=[],a=0;a<4e3;++a)n.push(this.bit.query(a,a+1));console.log(n),this.ratings=Array.from(this.user2rating.values()).map((function(t){return t.rating})),this.ratings.sort((function(t,e){return e-t}))}else this.ratings=[]}return Object(z.a)(t,[{key:"getRank",value:function(t){var e=this.user2ratingRankHistory.get(t);return void 0===e?-1:e[e.length-1][1]}},{key:"getRating",value:function(t){var e,i;return null!==(e=null===(i=this.user2rating.get(t))||void 0===i?void 0:i.rating)&&void 0!==e?e:0}},{key:"getHistogram",value:function(){for(var t=[0,1,2,3,4,5,7,9,12,15,19,25,32,42,54,69,89,114,147,188,242,311,400],e=500;e<1e4;e+=100)t.push(e);var i=Array(t.length);for(i.fill(0),this.ratings.forEach((function(e){var n=t.findIndex((function(i,n){return i<=e&&e<t[n+1]}));-1!==n&&i[n]++}));0===i[i.length-1];)i.pop(),t.pop();return[t,i]}},{key:"getRanking",value:function(){var t=Array.from(this.user2rating.values());return t.sort((function(t,e){return t.rating!=e.rating?e.rating-t.rating:t.username<e.username?-1:1})),t}}]),t}(),U=function(t){var e=t.paramUser,i=t.ratingHistory,n=t.ratingRanks;if(0===i.length)return Object(O.jsx)(O.Fragment,{});var a=i[i.length-1],r=new Date(1e3*a.EndTime),s=n.getRank(e),c=H(a.NewRating)[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{fontSize:"24px"},children:"Contest Status"}),Object(O.jsx)("hr",{}),Object(O.jsxs)("table",{className:"dl-table",style:{fontSize:"14px"},children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"no-break",children:"Name"}),Object(O.jsx)("td",{children:e})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"no-break",children:"Rank"}),Object(O.jsx)("td",{children:_(s)})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"no-break",children:"Rating"}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{style:{color:c},children:a.NewRating})})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"no-break",children:"Rated Matches"}),Object(O.jsx)("td",{children:i.length})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"no-break",children:"Last Competed"}),Object(O.jsx)("td",{children:P(r)})]})]})]})},L=i(34),X=i.n(L),Y=i(51),W=void 0,I=function(){var t=Object(Y.a)(X.a.mark((function t(){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0===W?fetch("".concat(".","/json/contests/contests.json")).catch((function(t){throw Error(t)})).then(function(){var t=Object(Y.a)(X.a.mark((function t(e){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return W=t.sent,t.abrupt("return",W);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):Promise.resolve(W));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=new Map,q=function(){var t=Object(Y.a)(X.a.mark((function t(e){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0!==e&&e.length>0&&e.startsWith("ahc")?J.has(e)?Promise.resolve(J.get(e)):fetch("".concat(".","/json/results/").concat(e,".json")).catch((function(t){throw Error(t)})).then(function(){var t=Object(Y.a)(X.a.mark((function t(i){var n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.json();case 2:return n=t.sent,J.set(e,n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):Promise.resolve(void 0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=i(230),Q=i(231),V=i(238),Z=i(239),$=i(54),tt=i(20),et=i(44),it=function(t){var e=new et.a;return t.addChild(e),e},nt=function(t,e,i,n,a){var r=new tt.d("",new tt.e({fontFamily:n,fontSize:a,fill:0}));return r.x=e,r.y=i,r.anchor.x=.5,r.anchor.y=.5,t.addChild(r),r},at="Lato",rt="Squada One",st=50,ct=580,ot=70,ht=function(){function t(e,i,n){Object(G.a)(this,t),this.object=void 0,this.angle=void 0,this.speed=void 0,this.velocityX=void 0,this.velocityY=void 0,this.rotateSpeed=void 0,this.life=void 0,this.initialX=void 0,this.initialY=void 0,this.initialX=i,this.initialY=n,this.object=nt(e,0,0,at,64),this.angle=0,this.speed=0,this.velocityX=0,this.velocityY=0,this.rotateSpeed=0,this.life=0,this.object.x=this.initialX,this.object.y=this.initialY}return Object(z.a)(t,[{key:"set",value:function(t,e,i){this.object.x=this.initialX,this.object.y=this.initialY,this.angle=Math.random()*Math.PI*2,this.speed=4*Math.random()+4,this.velocityX=Math.cos(this.angle)*this.speed,this.velocityY=Math.sin(this.angle)*this.speed,this.rotateSpeed=20*Math.random()+10,this.life=30,this.object.visible=!0,this.object.style.fill=t,this.object.text=i?"\u2605":"@",this.object.alpha=e}},{key:"disable",value:function(){this.life=0,this.object.visible=!1}},{key:"update",value:function(){this.life<=0?this.object.visible=!1:(this.object.x+=this.velocityX,this.velocityX*=.9,this.object.y+=this.velocityY,this.velocityY*=.9,this.life--,this.object.scale.x=this.object.scale.y=this.life/30,this.object.rotation+=this.rotateSpeed)}}]),t}(),lt=function(){function t(e,i,n){Object(G.a)(this,t),this.particles=void 0,this.particles=[];for(var a=0;a<20;++a)this.particles.push(new ht(e,i,n))}return Object(z.a)(t,[{key:"set",value:function(t,e,i,n){var a=n>=3200;this.particles.forEach((function(n,r){r<t?n.set(e,i,a):n.disable()}))}},{key:"update",value:function(){this.particles.forEach((function(t){t.life>0&&t.update()}))}}]),t}(),dt=function(){function t(e,i){var n=this;Object(G.a)(this,t),this.app=void 0,this.statusContainer=void 0,this.borderGraphics=void 0,this.ratingText=void 0,this.placeText=void 0,this.diffText=void 0,this.dateText=void 0,this.contestNameText=void 0,this.particles=void 0,this.standingsUrl=void 0,this.mode=void 0,this.app=e,this.statusContainer=void 0,this.standingsUrl="",this.mode=i,this.app.ticker.maxFPS=60,this.app.ticker.add((function(){n.animate()}))}return Object(z.a)(t,[{key:"destroy",value:function(){this.statusContainer&&(this.statusContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.statusContainer=void 0)}},{key:"init",value:function(){var t=this;this.destroy(),this.statusContainer=new tt.b,this.app.stage.addChild(this.statusContainer),this.borderGraphics=it(this.statusContainer),this.ratingText=nt(this.statusContainer,125,40,rt,48),this.placeText=nt(this.statusContainer,210,30.925925925925924,at,16),this.diffText=nt(this.statusContainer,210,51.666666666666664,at,11),this.diffText.style.fill=8947848,this.dateText=nt(this.statusContainer,250,22.5,at,14),this.contestNameText=nt(this.statusContainer,250,48.75,at,20),this.dateText.anchor.x=0,this.contestNameText.anchor.x=0,this.contestNameText.width>370&&(this.contestNameText.scale.x=370/this.contestNameText.width),this.contestNameText.interactive=!0,this.contestNameText.cursor="pointer",this.contestNameText.on("click",(function(){window.location.href=t.standingsUrl})),this.particles=new lt(this.statusContainer,this.ratingText.x,this.ratingText.y)}},{key:"set",value:function(t,e){if(this.particles){var i,n=new Date(1e3*t.EndTime),a="Rating"===this.mode?t.NewRating:t.performance,r="Rating"===this.mode?t.OldRating:null,s=t.Place,c=t.ContestName,o=H(a),h=o[3],l=o[2];if(this.borderGraphics.clear().lineStyle(1,h).drawRoundedRect(st,5,ct,ot,2),this.ratingText.text=String(a),this.ratingText.style.fill=h,this.placeText.text=_(s),this.diffText.text=null!==r?"".concat(0===(i=a-r)?"\xb1":i<0?"-":"+").concat(Math.abs(i)):"-",this.dateText.text=n.toLocaleDateString(),this.contestNameText.text=c,this.contestNameText.scale.x=1,this.contestNameText.width>370&&(this.contestNameText.scale.x=370/this.contestNameText.width),e){var d=Math.floor(17*Math.pow(function(t){for(var e=E[E.length-1][0]+400,i=E.length-1;i>=0;i--){if(t>=E[i][0])return(t-E[i][0])/(e-E[i][0]);e=E[i][0]}return 0}(a),2)+3);this.particles.set(d,h,l,a)}this.standingsUrl=t.StandingsUrl}}},{key:"animate",value:function(){this.particles&&this.particles.update()}}]),t}(),ut=i(56),xt=40,gt=20,jt=588,ft=430,bt="Lato",vt=function(){function t(e){Object(G.a)(this,t),this.app=void 0,this.chartContainer=void 0,this.chartGraphics=void 0,this.labelTextStyle=void 0,this.n=void 0,this.xaxis=void 0,this.data=void 0,this.rating=void 0,this.yMax=void 0,this.lineGraphics=void 0,this.ratingText=void 0,this.app=e,this.chartContainer=void 0}return Object(z.a)(t,[{key:"destroy",value:function(){this.chartContainer&&(this.chartContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.chartContainer=void 0)}},{key:"init",value:function(t,e,i){if(this.destroy(),this.chartContainer=new tt.b,this.app.stage.addChild(this.chartContainer),e.length!==t.length)throw new Error("\u9577\u3055\u4e0d\u4e00\u81f4");this.xaxis=t,this.data=e,this.rating=i,this.n=e.length,0!=this.n&&(this.xaxis.push(this.xaxis[this.n-1]+100),this.yMax=1.1*this.data.reduce((function(t,e){return Math.max(t,e)}),0),this.labelTextStyle=new tt.e({fontFamily:bt,fontSize:12,fill:0}),this.initBackground(),this.initChart())}},{key:"initBackground",value:function(){var t=this;if(void 0!==this.chartContainer){var e=it(this.chartContainer);e.x=xt,e.y=gt,e.alpha=.3;var i=it(this.chartContainer);i.x=xt,i.y=gt;var n=function(e,i){var n=new tt.d(e,t.labelTextStyle);return n.x=30,n.y=gt+i,n.anchor.x=1,n.anchor.y=.5,void 0===t.chartContainer?n:t.chartContainer.addChild(n)},a=function(e,i){var n=new tt.d(e,new tt.e({fontFamily:bt,fontSize:10,fill:0}));return n.x=xt+i,n.y=453,n.anchor.x=0,n.anchor.y=.5,n.angle=90,void 0===t.chartContainer?n:t.chartContainer.addChild(n)};i.lineStyle(1,14540253);for(var r=20;r<this.yMax;r+=20){var s=ft-ft*B(r,0,this.yMax);i.moveTo(0,s).lineTo(jt,s),n(String(r),s)}for(var c=0;c<this.n;c+=2){var o=jt*B(c,0,this.n);a(String(this.xaxis[c]),o)}i.lineStyle(1.5,8947848).drawRoundedRect(0,0,jt,ft,2)}}},{key:"newText",value:function(t,e,i,n){var a=new tt.d("",n);return a.x=e,a.y=i,a.anchor.x=.5,a.anchor.y=.5,t.addChild(a),a}},{key:"initChart",value:function(){var t=this;if(void 0!==this.chartContainer){this.chartGraphics=it(this.chartContainer);var e=new ut.a;e.color=0,e.alpha=.3,e.distance=Math.hypot(1,2),e.angle=Math.atan2(1,2),e.blur=3,this.chartGraphics.filters=[e];var i=this.newText(this.chartGraphics,0,0,new tt.e({fontFamily:bt,fontSize:10,fill:0}));i.visible=!1;var n=it(this.chartContainer);n.lineStyle(1,14540253).moveTo(0,20).lineTo(0,ft),n.y=gt,n.visible=!1;for(var a=function(e){var a=it(t.chartGraphics),r=ft*B(t.data[e],0,t.yMax),s=Math.floor(xt+jt*B(e,0,t.n)),c=Math.floor(xt+jt*B(e+1,0,t.n));a.x=s,a.y=450-r,a.lineStyle(.5,16777215).beginFill(H(t.xaxis[e])[3]).drawRect(0,0,c-s-1,r);var o=new tt.c(0,+r-ft,jt/t.n,ft);a.hitArea=o,a.interactive=!0,a.on("mouseover",(function(){!function(e){var a=xt+jt*B(e+.5,0,t.n);i.text="".concat(t.data[e]),i.style.fill=H(t.xaxis[e])[1],i.x=a,i.y=30,n.x=a,i.visible=!0,n.visible=!0}(e)})),a.on("mouseout",(function(){i.visible=!1,n.visible=!1}))},r=0;r<this.n;++r)a(r);this.initUserRatingLine(this.rating)}}},{key:"getXandColor",value:function(t){for(var e=jt,i=0,n=this.n-1;n>=0;n--)if(this.xaxis[n]<=t){var a=B(t+.5,this.xaxis[n],this.xaxis[n+1]);e=jt*B(n+a,0,this.n),i=H(this.xaxis[n])[3];break}return[e,i]}},{key:"initUserRatingLine",value:function(t){if(void 0!==this.chartContainer&&void 0!==this.chartGraphics){var e=this.getXandColor(t),i=Object(u.a)(e,2),n=i[0],a=i[1];this.lineGraphics=it(this.chartContainer),this.lineGraphics.lineStyle(1,0).moveTo(0,0).lineTo(0,ft),this.lineGraphics.x=xt+n,this.lineGraphics.y=gt,this.ratingText=this.newText(this.chartGraphics,xt+n,12,new tt.e({fontFamily:bt,fontSize:11,fill:a})),this.ratingText.text=String(t)}}},{key:"updateUserRatingLine",value:function(t){this.rating=t,void 0!==this.lineGraphics&&void 0!==this.ratingText&&(this.lineGraphics.x=xt+this.getXandColor(t)[0],this.ratingText.text=String(t))}}]),t}(),mt=function(t){var e=t.xaxis,i=t.data,n=t.rating,r=Object($.a)([{family:rt},{family:at}]),s=Object(a.useRef)(null),c=Object(a.useState)(),o=Object(u.a)(c,2),h=o[0],l=o[1];return Object(a.useEffect)((function(){var t=s.current;if(null!==t){var e=new tt.a({width:640,height:480,view:t,antialias:!0});e.renderer.backgroundColor=16777215;var i=new vt(e);l(i)}}),[]),Object(a.useEffect)((function(){r&&i&&h&&(0!==i.length?h.init(e,i,n):h.destroy())}),[r,i,h]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{children:Object(O.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"480px",height:"100%",width:"100%",display:"block"},ref:s,width:"640",height:"480"})})})},pt=2592e3,yt=50,Ot=580,Ct=325,Rt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wt=function(){function t(e,i){Object(G.a)(this,t),this.app=void 0,this.chartContainer=void 0,this.x_min=void 0,this.x_max=void 0,this.y_min=void 0,this.y_max=void 0,this.labelTextStyle=void 0,this.R=void 0,this.mode=void 0,this.app=e,this.chartContainer=void 0,this.mode=i}return Object(z.a)(t,[{key:"destroy",value:function(){this.chartContainer&&(this.chartContainer.destroy({children:!0,texture:!0,baseTexture:!0}),this.chartContainer=void 0)}},{key:"getRating",value:function(t){return"Rating"===this.mode?t.NewRating:t.performance}},{key:"init",value:function(t,e){var i=this;this.destroy(),this.chartContainer=new tt.b,this.app.stage.addChild(this.chartContainer),this.R=1,this.x_min=1e11,this.x_max=0,this.y_min=1e4,this.y_max=0,t.forEach((function(t){i.x_min=Math.min(i.x_min,t.EndTime),i.x_max=Math.max(i.x_max,t.EndTime);var e=i.getRating(t);i.y_min=Math.min(i.y_min,e),i.y_max=Math.max(i.y_max,e)})),this.x_min-=pt,this.x_max+=pt,this.y_min=Math.min(1500,Math.max(0,this.y_min-100)),this.y_max+=300,this.labelTextStyle=new tt.e({fontFamily:"Lato",fontSize:12*this.R,fill:0}),this.initBackground(),this.initChart(t,e)}},{key:"initBackground",value:function(){var t=this;if(void 0!==this.chartContainer){var e=new et.a;e.x=yt*this.R,e.y=5*this.R,e.alpha=.3;var i=new et.a;i.x=yt*this.R,i.y=5*this.R,this.chartContainer.addChild(e),this.chartContainer.addChild(i);for(var n=0,a=E.length-1;a>=0;a--){var r=Ct-Ct*B(E[a][0],this.y_min,this.y_max);r>0&&n<Ct&&(n=Math.max(n,0),e.beginFill(E[a][3]).drawRect(0,n*this.R,Ot*this.R,(Math.min(r,Ct)-n)*this.R).endFill()),n=r}for(var s=function(e,i){var n=new tt.d(e,t.labelTextStyle);return n.x=40*t.R,n.y=(5+i)*t.R,n.anchor.x=1,n.anchor.y=.5,void 0===t.chartContainer?n:t.chartContainer.addChild(n)},c=function(e,i,n){var a=new tt.d(e,t.labelTextStyle);return a.x=(yt+i)*t.R,a.y=(332+n)*t.R,a.anchor.x=.5,a.anchor.y=0,void 0===t.chartContainer?a:t.chartContainer.addChild(a)},o=0;o<=this.y_max;o+=400)if(o>=this.y_min){var h=Ct-Ct*B(o,this.y_min,this.y_max);s(String(o),h),i.lineStyle(1*this.R,16777215),2e3===o&&i.lineStyle(1*this.R,0),i.moveTo(0,h*this.R).lineTo(Ot*this.R,h*this.R)}i.lineStyle(1*this.R,16777215);for(var l=6,d=3;d>=1;d--)this.x_max-this.x_min<=31536e3*d+5184e3&&(l=d);for(var u=!0,x=2010;x<3e3;x++){for(var g=!1,j=0;j<12;j+=l){var f="0".concat(j+1).slice(-2),b=Date.parse("".concat(x,"-").concat(f,"-01T00:00:00"))/1e3;if(this.x_min<b&&b<this.x_max){var v=Ot*B(b,this.x_min,this.x_max);0===j||u?(c(Rt[j],v,0),c(String(x),v,13),u=!1):c(Rt[j],v,0),i.moveTo(v*this.R,0).lineTo(v*this.R,Ct*this.R)}if(b>this.x_max){g=!0;break}}if(g)break}i.lineStyle(1.5*this.R,8947848).drawRoundedRect(0,0,Ot*this.R,Ct*this.R,2*this.R)}}},{key:"initChart",value:function(t,e){var i=this;if(void 0!==this.chartContainer){var n=new et.a;this.chartContainer.addChild(n);var a=new ut.a;a.color=0,a.alpha=.3,a.distance=Math.hypot(1,2)*this.R,a.angle=Math.atan2(1,2),a.blur=3*this.R,n.filters=[a];var r=it(n),s=it(n);s.interactive=!0;var c=function(i){l[i].scale.x=l[i].scale.y=1.2,e.set(t[i],!0)},o=function(t){l[t].scale.x=l[t].scale.y=1},h=t.reduce((function(t,e,n){var a=t.argmax,r=t.maxRating,s=i.getRating(e);return s>r&&(a=n,r=s),{argmax:a,maxRating:r}}),{argmax:0,maxRating:0}).argmax,l=t.map((function(t,e){var a=it(n);a.lineStyle(1*i.R,16777215),e===h&&a.lineStyle(1*i.R,0);var r=i.getRating(t);return a.beginFill(H(r)[3]).drawCircle(0,0,3.5*i.R),a.x=(yt+Ot*B(t.EndTime,i.x_min,i.x_max))*i.R,a.y=(Ct-Ct*B(r,i.y_min,i.y_max)+5)*i.R,a.interactive=!0,a.on("mouseover",(function(){c(e)})),a.on("mouseout",(function(){o(e)})),a})),d=80*this.R;(this.x_min+this.x_max)/2<t[h].EndTime&&(d=-80*this.R);var x=l[h].x+d,g=l[h].y-16;s.lineStyle(1*this.R,16777215).moveTo(l[h].x,l[h].y).lineTo(x,g),s.lineStyle(1*this.R,8947848).beginFill(16777215).drawRoundedRect(x-40*this.R,g-10*this.R,80*this.R,20*this.R,2*this.R);var j=new tt.d("Highest: ".concat(this.getRating(t[h])),this.labelTextStyle);j.x=x,j.y=g,j.anchor.x=.5,j.anchor.y=.5,this.chartContainer.addChild(j),s.on("mouseover",(function(){c(h)})),s.on("mouseout",(function(){o(h)})),[[2,11184810],[1,16777215]].forEach((function(t){var e=Object(u.a)(t,2),n=e[0],a=e[1];r.lineStyle(n*i.R,a),r.moveTo(l[0].x,l[0].y),l.forEach((function(t){r.lineTo(t.x,t.y)}))}))}}}]),t}(),kt=function(t){var e=t.ratingHistory,i=t.mode,n=Object($.a)([{family:rt},{family:at}]),r=Object(a.useRef)(null),s=Object(a.useRef)(null),c=Object(a.useState)(),o=Object(u.a)(c,2),h=o[0],l=o[1];return Object(a.useEffect)((function(){var t=r.current,e=s.current;if(null!==t&&null!==e){var n=new tt.a({width:640,height:80,view:t,antialias:!0}),a=new tt.a({width:640,height:360,view:e,antialias:!0});n.renderer.backgroundColor=16777215,a.renderer.backgroundColor=16777215;var c=new dt(n,i),o=new wt(a,i);l([c,o])}}),[]),Object(a.useEffect)((function(){if(n&&e&&h){var t=Object(u.a)(h,2),i=t[0],a=t[1];if(0===e.length)return a.destroy(),void i.destroy();var r=e[e.length-1];i.init(),a.init(e,i),i.set(r,!1)}}),[n,e,h]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:Object(O.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"80px",height:"100%",width:"100%",display:"block"},ref:r,width:"640",height:"80"})}),Object(O.jsx)("div",{children:Object(O.jsx)("canvas",{style:{margin:"0px auto",maxWidth:"640px",maxHeight:"360px",height:"100%",width:"100%",display:"block"},ref:s,width:"640",height:"360"})})]})};!function(t){t[t.rating=0]="rating",t[t.performance=1]="performance",t[t.ratingDistribution=2]="ratingDistribution"}(n||(n={}));var Tt=function(t){return Object(O.jsx)(O.Fragment,{children:t.display?t.children:Object(O.jsx)(O.Fragment,{})})},Ft=function(t){var e=t.paramUser,i=t.ratingHistory,r=t.ratingRanks,s=Object(a.useState)(n.rating),c=Object(u.a)(s,2),o=c[0],h=c[1],l=Object(a.useState)(""),d=Object(u.a)(l,2),x=d[0],g=d[1];Object(a.useEffect)((function(){if(i){var t=i[i.length-1],n=t.Place,a="".concat(e," took ").concat(_(n)," place in ").concat(t.ContestName,"!\n")+"Performance: ".concat(t.performance,"\n")+"Rating: ".concat(t.OldRating,"\u2192").concat(t.NewRating," ").concat(function(t){var e=0===t?":|":t<0?":(":":)";return"(".concat(0===t?"\xb1":t<0?"-":"+").concat(Math.abs(t),") ").concat(e)}(t.NewRating-t.OldRating),"\n")+"AtCoder Marathon Rating History";g(a)}}),[e,i]);var j=r.getHistogram(),f=Object(u.a)(j,2),b=f[0],v=f[1],m=r.getRating(e);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{style:{marginTop:"20px"},children:Object(O.jsxs)(K.a,{size:"sm",className:"btn-group-ac-style",children:[Object(O.jsx)(N.a,{onClick:function(){h(n.rating)},active:o===n.rating,children:"Rating"}),Object(O.jsx)(N.a,{onClick:function(){h(n.performance)},active:o===n.performance,children:"Performance"}),Object(O.jsx)(N.a,{onClick:function(){h(n.ratingDistribution)},active:o===n.ratingDistribution,children:"Rating Distribution"})]})}),Object(O.jsxs)("div",{style:{marginTop:"20px"},children:[Object(O.jsx)(Tt,{display:o===n.rating,children:Object(O.jsx)(kt,{paramUser:e,ratingHistory:i,mode:"Rating"})}),Object(O.jsx)(Tt,{display:o===n.performance,children:Object(O.jsx)(kt,{paramUser:e,ratingHistory:i,mode:"Performance"})}),Object(O.jsx)(Tt,{display:o===n.ratingDistribution,children:Object(O.jsx)(mt,{xaxis:b,data:v,rating:m})})]}),Object(O.jsxs)("div",{style:{textAlign:"center",marginTop:"30px"},children:[Object(O.jsx)(V.a,{url:window.location.href,title:x,id:"chart-share-button",children:Object(O.jsx)(Z.a,{size:40,round:!0})}),Object(O.jsx)(Q.a,{placement:"top",target:"chart-share-button",children:(x+" "+window.location.href).replaceAll("\n"," ")})]})]})},St=function(t){var e,i=null!==(e=t.match.params.user)&&void 0!==e?e:"",n=Object(d.b)("/json/contests/contests",I),a=n.data,r=n.error,s=Object(d.b)(a?"/json/results/":null,(function(){if(!a)return Promise.resolve([void 0]);var t=a.map((function(t){return q(t.slug)}));return Promise.all(t)})),c=s.data,o=s.error,h=i&&c?c.map((function(t){return t&&i in t?t[i]:void 0})).filter((function(t){return void 0!==t})):void 0,l=new D(c);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Description"}),Object(O.jsx)("p",{children:"AtCoder \u3067\u884c\u308f\u308c\u305f\u30de\u30e9\u30bd\u30f3\u30b3\u30f3\u30c6\u30b9\u30c8\u306e\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u63a8\u79fb\u3092\u30b0\u30e9\u30d5\u306b\u8868\u793a\u3057\u307e\u3059\uff0e"}),Object(O.jsx)("p",{children:"AtCoder \u304c\u516c\u5f0f\u306b\u30de\u30e9\u30bd\u30f3\u30ec\u30fc\u30c8\u306e\u30b0\u30e9\u30d5\u8868\u793a\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u307e\u3067\u306e\u3064\u306a\u304e\u3067\u3059\uff0e"}),Object(O.jsx)("hr",{}),r?Object(O.jsx)(R.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest list."}):void 0===a?Object(O.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest data..."}):o?Object(O.jsx)(R.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest results."}):void 0===c?Object(O.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest results..."}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(M,{paramUser:i}),Object(O.jsx)("hr",{}),(null===h||void 0===h?void 0:h.length)?Object(O.jsxs)("div",{style:{maxWidth:"640px",marginLeft:"auto",marginRight:"auto"},children:[Object(O.jsx)(U,{paramUser:i,ratingHistory:h,ratingRanks:l}),Object(O.jsx)(Ft,{paramUser:i,ratingHistory:h,ratingRanks:l})]}):Object(O.jsx)(R.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"AtCoder ID is empty or invalid."})]})},Nt=i(58),Mt=i(115),_t=i.n(Mt),Pt=i(74),Bt=i.n(Pt),Gt=i(75),zt=i.n(Gt),At=i(233),Et=i(234),Ht=i(235),Dt=(i(209),function(t,e,i){if(0===i)return[];if(i<=10)return n=1,a=i,Array.from({length:a-n+1},(function(t,e){return e+n}));for(var n,a,r=[t],s=1;;){var c=t-(s*=2)+1;if(c<e)break;r.unshift(c)}for(r[0]!==e&&r.unshift(e),s=1;;){var o=t+(s*=2)-1;if(o>i)break;r.push(o)}return r.slice(-1)[0]!==i&&r.push(i),r}),Ut=function(t){var e=t.renderSizePerPage,i=t.totalSize,n=t.sizePerPage,a=t.sizePerPageList,r=t.onSizePerPageChange,s=t.page,c=t.pageStartIndex,o=t.onPageChange;if(void 0===s||void 0===c||void 0===o||void 0===i||void 0===n||void 0===a||void 0===r)return null;var h=Math.ceil(i/n),l=Dt(s,c,h);return Object(O.jsxs)("div",{className:"pagination-panel-parent",children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w.a,{children:Object(O.jsx)(k.a,{className:"size-per-page",children:Object(O.jsxs)("span",{className:"small",children:["per page: ",a.map((function(t){return Object(O.jsx)("a",{className:"standings-per-page".concat(t===n?" active":""),onClick:function(){return r(t,1)},children:t},t)}))]})})}),Object(O.jsx)("hr",{className:"size-per-page-splitter"})]}),Object(O.jsx)(w.a,{children:Object(O.jsx)(k.a,{children:Object(O.jsx)(At.a,{className:"pagination-sm",style:{flexWrap:"wrap",justifyContent:"center"},children:l.map((function(t){return Object(O.jsx)(Et.a,{active:t===s,children:Object(O.jsx)(Ht.a,{onClick:function(){return o(t,n)},children:t})},t)}))})})})]})},Lt=i(236),Xt=i(76),Yt=["Black","Grey","Brown","Green","Cyan","Blue","Yellow","Orange","Red"],Wt=function(t){var e=Math.min(Math.floor(t/400),Yt.length-2);return Yt[e+1]},It=(i(210),function(t){var e,i=t.color,n=t.rating,a=n>=3200?1:n%400/400,r="topcoder-like-circle     ".concat(t.big?"topcoder-like-circle-big":""),s=function(t,e){if("Bronze"===t||"Silver"===t||"Gold"===t){var i=function(t){switch(t){case"Bronze":return{base:"#965C2C",highlight:"#FFDABD"};case"Silver":return{base:"#808080",highlight:"white"};case"Gold":return{base:"#FFD700",highlight:"white"}}}(t);return{borderColor:i.base,background:"linear-gradient(to right,         ".concat(i.base,", ").concat(i.highlight,", ").concat(i.base,")")}}var n=function(t){switch(t){case"Black":return"#000000";case"Grey":return"#808080";case"Brown":return"#804000";case"Green":return"#008000";case"Cyan":return"#00C0C0";case"Blue":return"#0000FF";case"Yellow":return"#C0C000";case"Orange":return"#FF8000";case"Red":return"#FF0000"}}(t);return{borderColor:n,background:"linear-gradient(to top,         ".concat(n," 0%,         ").concat(n," ").concat(100*e,"%,         rgba(0,0,0,0) ").concat(100*e,"%,         rgba(0,0,0,0) 100%)")}}(i,a);return Object(O.jsx)("span",{className:"".concat(r," ").concat(null!==(e=t.className)&&void 0!==e?e:""),id:t.id,style:s})});i(211);var Jt=function(t){var e=t.id,i=t.rating,n=Object(a.useState)(!1),r=Object(u.a)(n,2),s=r[0],c=r[1],o=function(){return c(!s)},h="RatingCircle-".concat(null!==e&&void 0!==e?e:"");if(void 0===i||i<0)return Object(O.jsxs)("span",{children:[Object(O.jsx)(Lt.a,{className:"rating-unavailable-circle",color:"info",id:h,pill:!0,children:"?"}),Object(O.jsx)(Xt.a,{placement:"top",target:h,isOpen:s,toggle:o,children:"Rating is unavailable."})]});var l=function(t){return t<3200?Wt(t):t<3600?"Bronze":t<4e3?"Silver":"Gold"}(i);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(It,{color:l,rating:i,className:"rating-circle",id:h}),Object(O.jsx)(Xt.a,{placement:"top",target:h,isOpen:s,toggle:o,children:"Rating: ".concat(i)})]})},qt=(i(212),function(t){return"asc"===t?Object(O.jsx)(p.a,{style:{marginLeft:"6px",marginTop:"0.2rem",marginBottom:"-0.2rem"},icon:y.e}):"desc"===t?Object(O.jsx)(p.a,{style:{marginLeft:"6px",marginTop:"-0.2rem",marginBottom:"0.2rem"},icon:y.d}):Object(O.jsx)(p.a,{style:{marginLeft:"6px"},icon:y.b})}),Kt=function(t){var e=t.ranking;if(0===e.length)return Object(O.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch data..."});var i=[{dataField:"rank",text:"Rank",sort:!0,classes:"standings-rank",headerClasses:"standings-rank-head",sortFunc:function(t,e,i){return"desc"===i?t-e:e-t},sortCaret:qt},{dataField:"username",text:"User",sort:!0,classes:"standings-username",headerClasses:"standings-username-head",filter:Object(Gt.textFilter)(),formatter:function(t,e){var i="ranking-user-btn-submission-".concat(t);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("a",{href:"https://atcoder.jp/users/".concat(t),className:"username",target:"_blank",rel:"noreferrer noopener",style:{color:H(e.rating)[1]},children:[Object(O.jsx)(Jt,{id:t,rating:e.rating})," ",Object(O.jsx)("span",{className:"user",children:t})]}),Object(O.jsxs)("span",{className:"ranking-user-btn",children:[Object(O.jsx)(o.b,{to:"/rating/".concat(t),id:i,children:Object(O.jsx)(p.a,{icon:y.a})}),Object(O.jsx)(Q.a,{placement:"top",target:i,children:"view ".concat(t,"'s rating history")})]})]})},sortFunc:function(t,e,i){return"desc"===i?t>e?1:-1:e<t?-1:1},sortCaret:qt},{dataField:"rating",text:"Rating",sort:!0,classes:"standings-rating",headerClasses:"standings-rating-head",formatter:function(t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("span",{style:{color:H(t)[1]},children:t})})},sortFunc:function(t,e,i){return"desc"===i?e-t:t-e},sortCaret:qt},{dataField:"match",text:"Match",sort:!0,classes:"standings-match",headerClasses:"standings-match-head",formatter:function(t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("span",{children:t})})},sortFunc:function(t,e,i){return"desc"===i?e-t:t-e},sortCaret:qt},{dataField:"win",text:"Win",sort:!0,classes:"standings-win",headerClasses:"standings-win-head",formatter:function(t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("span",{children:t})})},sortFunc:function(t,e,i){return"desc"===i?e-t:t-e},sortCaret:qt}];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Pt.PaginationProvider,{pagination:Bt()({custom:!0,sizePerPage:100,sizePerPageList:[10,20,50,100,1e3],totalSize:e.length}),children:function(t){var n=t.paginationProps,a=t.paginationTableProps;return a.keyField="user_name",a.data=e,a.columns=i,Object(O.jsxs)("div",{children:[Object(O.jsx)(Ut,Object(Nt.a)({renderSizePerPage:!0},n)),Object(O.jsx)(_t.a,Object(Nt.a)({bootstrap4:!0,classes:"th-center th-middle td-center td-middle table-standings",striped:!0,filter:zt()(),wrapperClasses:"table-responsive"},a)),Object(O.jsx)(Ut,Object(Nt.a)({renderSizePerPage:!1},n))]})}}),Object(O.jsx)("hr",{})]})},Qt=function(){var t=Object(d.b)("/json/contests/contests",I),e=t.data,i=t.error,n=Object(d.b)(e?"/json/results/":null,(function(){if(!e)return Promise.resolve([void 0]);var t=e.map((function(t){return q(t.slug)}));return Promise.all(t)})),a=n.data,r=n.error,s=new D(a).getRanking();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Description"}),Object(O.jsx)("p",{children:"AtCoder \u3067\u884c\u308f\u308c\u305f\u30de\u30e9\u30bd\u30f3\u30b3\u30f3\u30c6\u30b9\u30c8\u306e\u7dcf\u5408\u30e9\u30f3\u30ad\u30f3\u30b0\u3092\u8868\u793a\u3057\u307e\u3059\uff0e"}),Object(O.jsx)("p",{children:"AtCoder \u304c\u516c\u5f0f\u306b\u30de\u30e9\u30bd\u30f3\u30ec\u30fc\u30c8\u306e\u7dcf\u5408\u30e9\u30f3\u30ad\u30f3\u30b0\u8868\u793a\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u307e\u3067\u306e\u3064\u306a\u304e\u3067\u3059\uff0e"}),Object(O.jsx)("hr",{}),i?Object(O.jsx)(R.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest list."}):void 0===e?Object(O.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest data..."}):r?Object(O.jsx)(R.a,{color:"danger",style:{marginTop:"50px",marginBottom:"50px"},children:"Failed to fetch contest results."}):void 0===a?Object(O.jsx)("div",{style:{width:"100%",height:"500px",textAlign:"center",marginTop:"100px",marginBottom:"100px"},children:"Fetch contest results..."}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(Kt,{ranking:s})]})},Vt=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(d.a,{value:{revalidateOnFocus:!1},children:Object(O.jsxs)(o.a,{children:[Object(O.jsx)(C,{}),Object(O.jsx)(l.a,{style:{width:"100%",maxWidth:"90%",marginTop:"80px"},children:Object(O.jsxs)(h.d,{children:[Object(O.jsx)(h.b,{exact:!0,path:"/rating/:user",component:St}),Object(O.jsx)(h.b,{exact:!0,path:"/rating/",component:St}),Object(O.jsx)(h.b,{exact:!0,path:"/ranking/",component:Qt}),Object(O.jsx)(h.a,{path:"/",to:"/rating/"})]})}),Object(O.jsx)("footer",{className:"footer",style:{marginTop:"30px",padding:"30px",backgroundColor:"#efefef"},children:Object(O.jsxs)("div",{className:"container",children:["\u9023\u7d61\u5148:"," ",Object(O.jsx)("a",{href:"https://twitter.com/iiljj",target:"_blank",rel:"noreferrer noopener",children:"si (@iiljj) / Twitter"}),", ",Object(O.jsx)("a",{href:"https://github.com/iilj",target:"_blank",rel:"noreferrer noopener",children:"iilj (iilj) / GitHub"})]})})]})})})},Zt=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,240)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;i(t),n(t),a(t),r(t),s(t)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(Vt,{})}),document.getElementById("root")),Zt()}},[[213,1,2]]]);
//# sourceMappingURL=main.401516ed.chunk.js.map